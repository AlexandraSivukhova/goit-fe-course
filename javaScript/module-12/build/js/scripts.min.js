"use strict";var link=getLocalStorage(),form=document.querySelector(".form"),input=form.querySelector(".input"),button=form.querySelector(".button"),source=document.querySelector("#list").innerHTML.trim(),template=Handlebars.compile(source),grid=document.querySelector("#grid");function setLocalStorage(e){localStorage.setItem("saved_url",JSON.stringify(e))}function getLocalStorage(){var e=localStorage.getItem("saved_url");return e?JSON.parse(e):[]}function onAddUrlList(e){e.preventDefault();var t=input.value;return""===t?alert("Добавьте URL"):link.find(function(e){return e.url===t})?alert("Такая закладка уже существует!"):/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/g.test(t)?(form.reset(),link.push({url:t}),setLocalStorage(link),void getRender(link)):alert("Введите, пожалуйста, правильный URL.")}function getRender(e){for(var t="",r=e.length-1;0<=r;r--)e[r].position=r,t+=template(e[r]);grid.innerHTML=t}function onDeleteUrl(e){if("button"===e.target.nodeName.toLowerCase()){var t=e.target.dataset.position;setLocalStorage(link=link.filter(function(e){return e.position!=t})),getRender(link)}}button.addEventListener("click",onAddUrlList),grid.addEventListener("click",onDeleteUrl),window.onload=getRender(link);